import"./multi-wallet-connector-0c891252.js";import"./user-store-1b0d5afd.js";class t{constructor(){this.walletConnection=window.walletConnection,this.userStore=window.userStore,this.currencyConverter=window.currencyConverter,this.currentFilter="all",this.searchTerm="",this.init()}async init(){this.setupEventListeners(),await this.loadArtists()}setupEventListeners(){document.addEventListener("click",t=>{"connectWallet"===t.target.id&&this.handleWalletConnection()});const t=document.getElementById("searchInput");t&&t.addEventListener("input",t=>{this.searchTerm=t.target.value.toLowerCase(),this.filterAndDisplayArtists()});const e=document.querySelectorAll(".filter-tab");e.forEach(t=>{t.addEventListener("click",t=>{e.forEach(t=>t.classList.remove("active")),t.target.classList.add("active"),this.currentFilter=t.target.dataset.filter,this.filterAndDisplayArtists()})}),document.addEventListener("click",t=>{if(t.target.closest(".artist-card")){const e=t.target.closest(".artist-card").dataset.walletAddress;this.openArtistProfile(e)}});const s=document.getElementById("mobileMenuToggle"),n=document.getElementById("mobileMenu");s&&n&&(s.addEventListener("click",()=>{n.classList.toggle("active")}),document.addEventListener("click",t=>{s.contains(t.target)||n.contains(t.target)||n.classList.remove("active")}))}async handleWalletConnection(){if(console.log("Member Artists: handleWalletConnection called"),window.walletState&&window.walletState.isConnected)window.disconnectWalletDirect&&window.disconnectWalletDirect();else if(window.connectWalletDirect)try{await window.connectWalletDirect()}catch(t){console.error("Member Artists: Wallet connection failed",t)}else console.error("Member Artists: Direct wallet connection not available")}async loadArtists(){try{document.getElementById("loadingIndicator").style.display="block",document.getElementById("artistsGrid").style.display="none",document.getElementById("emptyState").style.display="none";const t=this.userStore.getArtists();console.log("Loaded artists:",t),this.updateStats(t),this.artists=t,this.filterAndDisplayArtists()}catch(t){console.error("Error loading artists:",t),this.showError("Failed to load artists. Please try again.")}finally{document.getElementById("loadingIndicator").style.display="none"}}updateStats(t){const e=t.length,s=this.userStore.getNFTs().length;let n=0,a=0;t.forEach(t=>{n+=t.totalSales||0,a+=parseFloat(t.totalEarnings||"0")}),document.getElementById("totalArtists").textContent=e,document.getElementById("totalNFTs").textContent=s,document.getElementById("totalSales").textContent=n,document.getElementById("totalVolume").textContent=a.toFixed(2)}filterAndDisplayArtists(){if(!this.artists)return;let t=[...this.artists];switch(this.searchTerm&&(t=t.filter(t=>t.name.toLowerCase().includes(this.searchTerm)||t.walletAddress.toLowerCase().includes(this.searchTerm))),this.currentFilter){case"verified":t=t.filter(t=>t.verified);break;case"top-sellers":t=t.filter(t=>(t.totalSales||0)>0).sort((t,e)=>(e.totalSales||0)-(t.totalSales||0));break;default:t=t.sort((t,e)=>e.registrationDate-t.registrationDate)}this.displayArtists(t)}displayArtists(t){const e=document.getElementById("artistsGrid"),s=document.getElementById("emptyState");if(0===t.length)return e.style.display="none",void(s.style.display="block");e.style.display="grid",s.style.display="none",e.innerHTML=t.map(t=>this.createArtistCard(t)).join("")}createArtistCard(t){const e=`${t.walletAddress.substring(0,6)}...${t.walletAddress.slice(-4)}`,s=t.avatar?`<img src="${t.avatar}" alt="${t.name}">`:t.name.substring(0,2).toUpperCase();new Date(t.registrationDate).toLocaleDateString();const n=t.verified?'<span style="color: var(--success-color); font-size: 0.9rem;">✓ Verified</span>':"",a=this.userStore.getNFTs().filter(e=>e.creator===t.walletAddress).length;return`\n            <div class="artist-card" data-wallet-address="${t.walletAddress}">\n                <div class="artist-header">\n                    <div class="artist-avatar">\n                        ${s}\n                    </div>\n                    <div class="artist-info">\n                        <h3>${t.name} ${n}</h3>\n                        <div class="artist-address">${e}</div>\n                    </div>\n                </div>\n                \n                <div class="artist-bio">\n                    ${t.bio||"No bio provided"}\n                </div>\n                \n                <div class="artist-stats">\n                    <div class="artist-stat">\n                        <span class="artist-stat-number">${a}</span>\n                        <span class="artist-stat-label">NFTs</span>\n                    </div>\n                    <div class="artist-stat">\n                        <span class="artist-stat-number">${t.totalSales||0}</span>\n                        <span class="artist-stat-label">Sales</span>\n                    </div>\n                    <div class="artist-stat">\n                        <span class="artist-stat-number">${parseFloat(t.totalEarnings||"0").toFixed(2)}</span>\n                        <span class="artist-stat-label">ETH</span>\n                    </div>\n                </div>\n                \n                ${t.social?`\n                    <div class="artist-social">\n                        <a href="${t.social}" target="_blank" rel="noopener noreferrer">\n                            ${this.formatSocialLink(t.social)}\n                        </a>\n                    </div>\n                `:""}\n                \n                <div class="artist-actions">\n                    <button class="btn btn-primary" onclick="window.location.href='profile.html?artist=${t.walletAddress}'">\n                        View Profile\n                    </button>\n                    <button class="btn btn-secondary" onclick="window.location.href='gallery.html?artist=${t.walletAddress}'">\n                        View NFTs\n                    </button>\n                </div>\n            </div>\n        `}formatSocialLink(t){return t.includes("twitter.com")||t.includes("x.com")?"🐦 Twitter":t.includes("instagram.com")?"📸 Instagram":t.includes("linkedin.com")?"💼 LinkedIn":t.includes("github.com")?"🐙 GitHub":"🔗 Website"}openArtistProfile(t){window.location.href=`profile.html?artist=${t}`}showError(t){this.walletConnection&&this.walletConnection.showMessage?this.walletConnection.showMessage(t,"error"):console.error(t)}}document.addEventListener("DOMContentLoaded",()=>{new t});
