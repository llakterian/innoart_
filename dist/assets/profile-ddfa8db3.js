import"./wallet-5154a2ff.js";new class{constructor(t){this.wallet=t,this.isEditing=!1,this.userProfile={},this.init()}init(){document.addEventListener("DOMContentLoaded",()=>{this.setupEventListeners(),this.handleAccountsChanged(this.wallet.state.address?[this.wallet.state.address]:[])})}setupEventListeners(){document.getElementById("editProfileBtn").addEventListener("click",()=>this.toggleEditMode()),document.getElementById("saveProfileBtn").addEventListener("click",()=>this.saveProfile()),window.ethereum.on("accountsChanged",t=>{this.handleAccountsChanged(t)})}handleAccountsChanged(t){t.length>0?(this.loadUserProfile(t[0]),this.showProfileContent()):this.showWelcomeSection()}loadUserProfile(t){this.updateUserDisplay(t);const e=localStorage.getItem(`profile_${t}`);e&&(this.userProfile=JSON.parse(e),this.populateProfileForm())}updateUserDisplay(t){document.getElementById("userAddress").textContent=this.userProfile.artistName||`${t.slice(0,6)}...${t.slice(-4)}`,document.getElementById("userAddressDisplay").textContent=t,document.getElementById("userInitials").textContent=this.userProfile.artistName?this.userProfile.artistName.charAt(0).toUpperCase():t.charAt(2).toUpperCase()}showWelcomeSection(){document.getElementById("welcomeSection").style.display="block",document.getElementById("profileContent").style.display="none"}showProfileContent(){document.getElementById("welcomeSection").style.display="none",document.getElementById("profileContent").style.display="grid"}toggleEditMode(){this.isEditing=!this.isEditing;const t=document.getElementById("artistProfileForm"),e=document.getElementById("editProfileBtn"),i=document.getElementById("saveProfileBtn");t.style.display=this.isEditing?"block":"none",e.style.display=this.isEditing?"none":"block",i.style.display=this.isEditing?"block":"none"}populateProfileForm(){for(const t in this.userProfile){const e=document.getElementById(t);e&&(e.value=this.userProfile[t])}}sanitizeInput(t){const e=document.createElement("div");return e.textContent=t,e.innerHTML}saveProfile(){const t=this.wallet.state.address;if(!t)return void alert("Please connect your wallet first.");const e={artistName:this.sanitizeInput(document.getElementById("artistName").value),artistBio:this.sanitizeInput(document.getElementById("artistBio").value),artistWebsite:this.sanitizeInput(document.getElementById("artistWebsite").value),artistSocial:this.sanitizeInput(document.getElementById("artistSocial").value),artistEmail:this.sanitizeInput(document.getElementById("artistEmail").value),artistLocation:this.sanitizeInput(document.getElementById("artistLocation").value)};e.artistName.trim()?(localStorage.setItem(`profile_${t}`,JSON.stringify(e)),this.userProfile=e,this.updateUserDisplay(t),this.toggleEditMode(),alert("Profile saved successfully!")):alert("Artist name is required.")}}(window.wallet);
