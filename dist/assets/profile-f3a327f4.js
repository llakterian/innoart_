import"./app-77b56577.js";window.userService=new class{constructor(e){this.apiClient=e}async getProfile(e){return{walletAddress:e,name:"John Doe",bio:"I am a user of this amazing platform.",social:"https://twitter.com/johndoe",avatar:"https://via.placeholder.com/100",isArtist:!0}}async updateProfile(e,t){return{...t,walletAddress:e}}}(window.apiClient);class e{constructor(){this.authManager=window.authManager,this.userService=window.userService,this.uiManager=window.uiManager,this.init()}async init(){this.addEventListeners(),this.checkAuthState()}addEventListeners(){var e,t,i;null==(e=document.getElementById("editProfileBtn"))||e.addEventListener("click",()=>this.toggleEditMode(!0)),null==(t=document.getElementById("saveProfileBtn"))||t.addEventListener("click",()=>this.saveProfile()),null==(i=document.getElementById("cancelEditBtn"))||i.addEventListener("click",()=>this.toggleEditMode(!1))}checkAuthState(){const e=this.authManager.getAuthState();e.isAuthenticated?(this.loadProfile(e.walletAddress),document.getElementById("profileContent").style.display="grid",document.getElementById("welcomeSection").style.display="none"):(document.getElementById("profileContent").style.display="none",document.getElementById("welcomeSection").style.display="block")}async loadProfile(e){try{const t=await this.userService.getProfile(e);this.renderProfile(t)}catch(t){this.uiManager.showNotification("Failed to load profile.","error")}}renderProfile(e){document.getElementById("userName").textContent=this.uiManager.sanitize(e.name),document.getElementById("userAddressDisplay").textContent=this.uiManager.sanitize(e.walletAddress),document.getElementById("userInitials").textContent=this.uiManager.sanitize(e.name.charAt(0)),document.getElementById("artistName").value=e.name,document.getElementById("artistBio").value=e.bio,document.getElementById("artistWebsite").value=e.social}toggleEditMode(e){const t=document.getElementById("artistProfileForm"),i=document.getElementById("editProfileBtn"),n=document.getElementById("saveProfileBtn"),a=document.getElementById("cancelEditBtn");e?(t.style.display="block",i.style.display="none",n.style.display="block",a.style.display="block"):(t.style.display="none",i.style.display="block",n.style.display="none",a.style.display="none")}async saveProfile(){const e=this.authManager.getAuthState().walletAddress,t={name:document.getElementById("artistName").value,bio:document.getElementById("artistBio").value,social:document.getElementById("artistWebsite").value};try{await this.userService.updateProfile(e,t),this.uiManager.showNotification("Profile updated successfully!","success"),this.toggleEditMode(!1),this.renderProfile({...t,walletAddress:e})}catch(i){this.uiManager.showNotification("Failed to update profile.","error")}}}document.addEventListener("DOMContentLoaded",()=>{window.location.pathname.includes("profile.html")&&new e});
