!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const e={state:{isConnected:!1,isConnecting:!1,address:null},async connect(){if(!this.state.isConnecting){this.state.isConnecting=!0,this.updateButtons("connecting");try{if(void 0===window.ethereum)throw new Error("MetaMask not installed");const e=await window.ethereum.request({method:"eth_requestAccounts"});this.handleAccountsChanged(e)}catch(e){this.handleError(e)}finally{this.state.isConnecting=!1}}},disconnect(){this.state.isConnected=!1,this.state.address=null,this.updateButtons("disconnected"),this.showMessage("Wallet disconnected","success")},handleAccountsChanged(e){if(0===e.length)this.disconnect();else{const t=e[0];this.state.isConnected=!0,this.state.address=t,this.updateButtons("connected",t),this.showMessage("Wallet connected successfully!","success")}},handleError(e){let t="Failed to connect wallet";4001===e.code?t="Connection rejected by user":-32002===e.code?t="Connection request pending in MetaMask":e.message.includes("not installed")&&(t="MetaMask not installed"),this.updateButtons("disconnected"),this.showMessage(t,"error")},updateButtons(e,t=null){document.querySelectorAll("[data-wallet-connect]").forEach(n=>{switch(e){case"connecting":n.textContent="Connecting...",n.disabled=!0;break;case"connected":const e=`${t.slice(0,6)}...${t.slice(-4)}`;n.textContent=e,n.disabled=!1;break;case"disconnected":n.textContent="Connect Wallet",n.disabled=!1}})},showMessage(e,t,n=5e3){const s=document.createElement("div");s.className=`wallet-message wallet-message-${t}`,s.textContent=e,document.body.appendChild(s),setTimeout(()=>{s.remove()},n)},init(){void 0!==window.ethereum&&window.ethereum.on("accountsChanged",e=>this.handleAccountsChanged(e)),document.addEventListener("click",e=>{e.target.closest("[data-wallet-connect]")&&(e.preventDefault(),this.state.isConnected?this.disconnect():this.connect())}),void 0!==window.ethereum&&window.ethereum.request({method:"eth_accounts"}).then(e=>this.handleAccountsChanged(e)).catch(e=>console.error(e))}};e.init(),window.wallet=e;
